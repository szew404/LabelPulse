{% extends "admin/popup_response.html" %}

{% block content %}

<style>
    .loading-spinner {
        height: 4.5px;
        width: 145.6px;
        background: linear-gradient(#474bff 0 0),
            linear-gradient(#474bff 0 0),
            #dbdcef;
        background-size: 60% 100%;
        background-repeat: no-repeat;
        animation: progress-7x9cg2 3s infinite;
    }
    
    @keyframes progress-7x9cg2 {
        0% {
            background-position: -150% 0, -150% 0;
        }
    
        66% {
            background-position: 250% 0, -150% 0;
        }
    
        100% {
            background-position: 250% 0, 250% 0;
        }
    }
</style>

<div id="spinner-container" class="loading-spinner" style="display: none;"></div>

{{ block.super }}

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const isPopup = window.location.search.includes('_popup=1');
        const form = document.querySelector('form');
        const saveBtn = document.querySelector('[name="_save"]');
        const spinner = document.getElementById('spinner-container'); 
    
        saveBtn.addEventListener('click', function () {
            spinner.style.display = 'block';
    
            if (isPopup) {
                form.style.opacity = '0.5'; 
            }
        });
    });
</script>

{% endblock %}
